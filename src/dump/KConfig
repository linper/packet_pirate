
menu "Data dump"

config DUMP_INTERVAL
	int "Dump interval"
	default 10
	help
		"Maximum imterval between dumps. Dump is executed each n seconds, unless batch filled first."

config DUMP_BATCH
	int "Dump batch size"
	default 50
	help
		"Maximum dump batch size. Dump is executed after batch is filled, unless dump interval has passed first."

config DUMP_APPEND
	bool "Append"
	default y
	help
		"If previous session filter tree, database path, and name is idendical to current, then new filtered packets will be appeded to existing database. Otherwise action will be desided by \"Override\" option."

config DUMP_OVERRIDE
	bool "Override"
	help
		"If checked, overrides old dump. Otherwise adds integer suffix to name."

choice
    prompt "Dump type"
    default DUMP_SQLITE3

config DUMP_TYPE_SQLITE3
	bool "Sqlite3 DB"
	help
		"Dumps filtered packets to autogenerated sqlite3 database."
  
config DUMP_TYPE_MYSQL
	bool "MySQL DB"
	help
		"Dumps filtered packets to autogenerated MySQL database."

config DUMP_TYPE_POSTGRE
	bool "Postgre DB (not impl)"
	help
		"Dumps filtered packets to autogenerated Postgre database."

endchoice

config DUMP_SQLITE3_PATH
	string "Dump path"
	default "./"
	depends on DUMP_TYPE_SQLITE3
	help
		"Path where database will be dumped."

config DUMP_SQLITE3_NAME
	string "Database name"
	default "dump"
	depends on DUMP_TYPE_SQLITE3
	help
		"Path where database will be dumped."


config DUMP_MYSQL_HOST
	string "Host"
	default "localhost"
	depends on DUMP_TYPE_MYSQL
	help
		"URL where database is hosted."

config DUMP_MYSQL_PORT
	int "Port"
	default 3306
	depends on DUMP_TYPE_MYSQL
	help
		"MySQL server port."

config DUMP_MYSQL_USER
	string "User"
	default "root"
	depends on DUMP_TYPE_MYSQL
	help
		"User with permissions to create and delete databases."

config DUMP_MYSQL_PASS
	string "Password"
	default "root"
	depends on DUMP_TYPE_MYSQL
	help
		"Password for user mentioned above."

config DUMP_MYSQL_NAME
	string "Database name"
	default "dump"
	depends on DUMP_TYPE_MYSQL
	help
		"Database name where filtered data will be dumped."

endmenu
